<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Paris December 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- HEADER -->
  <header class="main-header">
    <div class="header-top">
      <div>
        <h1>Paris December 2025</h1>
        <p class="subtitle">
          December 2 to 8, 2025 Â· Appleton â†’ Detroit â†’ Paris â†’ Detroit â†’ Appleton
        </p>
      </div>
      <div class="paris-time">
        <i class="fas fa-clock"></i>
        <span id="parisTime">Paris time: --:--</span>
      </div>
    </div>

    <div class="header-buttons">
      <a class="header-btn" href="https://www.ratp.fr/itineraires" target="_blank">
        <i class="fas fa-route"></i> RATP directions
      </a>
      <a class="header-btn"
         href="https://maps.apple.com/?address=7%20Avenue%20Stephen%20Pichon,%2075013,Paris"
         target="_blank">
        <i class="fas fa-map-pin"></i> Open home in Maps
      </a>
    </div>
  </header>

  <!-- MAP -->
  <section class="card map-section">
    <h2 class="section-title"><i class="fas fa-house-chimney"></i> Home base</h2>
    <p class="section-subtitle">7 Avenue Stephen Pichon, BÃ¢timent B Â· 13áµ‰ arrondissement</p>
    <div class="map-container">
      <iframe
        width="100%"
        height="100%"
        style="border:0; border-radius: 16px;"
        loading="lazy"
        allowfullscreen
        referrerpolicy="no-referrer-when-downgrade"
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2759.6629974250623!2d2.357184576428085!3d48.83348360245892!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47e6718b7ec95f99%3A0x6eaf265702e5e619!2s7%20Av.%20Stephen%20Pichon%2C%2075013%20Paris%2C%20France!5e1!3m2!1sen!2sus!4v1764636856567!5m2!1sen!2sus">
      </iframe>
    </div>
  </section>

  <!-- MAIN LAYOUT -->
  <main class="main-layout">
    <!-- LEFT: ITINERARY -->
    <section class="card itinerary-panel">
      <div class="panel-header">
        <div>
          <h2 class="section-title">
            <i class="fas fa-suitcase-rolling"></i> Itinerary planner
          </h2>
          <p class="section-subtitle">
            Drag to reorder Â· Add or delete items Â· Saved locally and can sync to GitHub
          </p>
        </div>
        <div class="itinerary-actions">
          <button class="secondary-btn" onclick="window.itineraryApp.resetToDefaults()">
            Reset to defaults
          </button>
          <button class="secondary-btn" onclick="window.itineraryApp.exportItinerary()">
            Export JSON
          </button>
        </div>
      </div>

      <div id="github-status" class="github-status"></div>

      <div id="itinerary-board" class="itinerary-board">
        <!-- itinerary.js will render columns here -->
      </div>
    </section>

    <!-- RIGHT: WEATHER -->
    <aside class="card sidebar-panel">
      <div class="panel-header">
        <h2 class="section-title">
          <i class="fas fa-cloud-sun-rain"></i> Paris weather
        </h2>
        <p class="section-subtitle">
          Today + next 5 days Â· Open-Meteo Â· Tap for full forecast
        </p>
      </div>

      <div id="paris-weather-days" class="weather-grid">
        <p>Loadingâ€¦</p>
      </div>
    </aside>
  </main>

  <!-- FOOTER -->
  <footer class="page-footer">
    <p>Built for Dominicaâ€™s Paris 2025 trip Â· Mattyâ€™s planner</p>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // Paris time
    function updateParisTime() {
      const el = document.getElementById("parisTime");
      if (!el) return;
      const now = new Date();
      const time = now.toLocaleTimeString("en-US", {
        hour: "2-digit",
        minute: "2-digit",
        timeZone: "Europe/Paris"
      });
      el.textContent = "Paris time: " + time;
    }
    updateParisTime();
    setInterval(updateParisTime, 30000);
  </script>

  <!-- Paris weather (based on your previous module) -->
  <script>
    function parisWeatherIcon(code) {
      if (code === 0) return "â˜€ï¸";
      if (code === 1) return "ğŸŒ¤ï¸";
      if (code === 2) return "â›…";
      if (code === 3) return "â˜ï¸";
      if (code === 45 || code === 48) return "ğŸŒ«ï¸";
      if ([51, 53, 55].includes(code)) return "ğŸŒ¦ï¸";
      if ([61, 63, 65, 80, 81, 82].includes(code)) return "ğŸŒ§ï¸";
      if ([71, 73, 75, 85, 86].includes(code)) return "â„ï¸";
      if ([95, 96, 99].includes(code)) return "â›ˆï¸";
      return "ğŸŒ¡ï¸";
    }

    async function loadParisWeather() {
      const url =
        "https://api.open-meteo.com/v1/forecast" +
        "?latitude=48.8566&longitude=2.3522" +
        "&daily=weathercode,temperature_2m_max,temperature_2m_min" +
        "&timezone=Europe%2FParis";

      let data;
      try {
        const res = await fetch(url, { cache: "no-store" });
        data = await res.json();
      } catch (e) {
        const proxy =
          "https://cors-proxy.api.exponential-hub.workers.dev/?" + url;
        const res = await fetch(proxy);
        data = await res.json();
      }

      const container = document.getElementById("paris-weather-days");
      if (!container) return;
      container.innerHTML = "";

      const days = data.daily.time;
      const codes = data.daily.weathercode;
      const tmax = data.daily.temperature_2m_max;
      const tmin = data.daily.temperature_2m_min;

      for (let i = 0; i < 6; i++) {
        const d = new Date(days[i]);
        const pretty = d.toLocaleDateString("en-US", {
          weekday: "short",
          month: "short",
          day: "numeric"
        });

        const icon = parisWeatherIcon(codes[i]);
        const hi = Math.round(tmax[i]);
        const lo = Math.round(tmin[i]);

        const link =
          "https://www.meteofrance.com/previsions-meteo-france/paris-75000?day=" +
          d.toISOString().slice(0, 10);

        const card = document.createElement("div");
        card.className = "weather-day";
        card.innerHTML = `
          <a href="${link}" target="_blank">
            <div class="weather-emoji">${icon}</div>
            <div class="weather-date">${pretty}</div>
            <div class="weather-temps">${hi}Â° / ${lo}Â°C</div>
          </a>
        `;
        container.appendChild(card);
      }
    }

    loadParisWeather();
  </script>

  <!-- Your existing itinerary logic -->
  <script src="itinerary.js"></script>
</body>
</html>
