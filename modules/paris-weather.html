<div class="module-header">
  <h2><i class="fas fa-cloud-sun-rain"></i> Paris weather</h2>
  <p class="panel-subtitle">Today and next five days · Data from Open-Meteo · Central Paris</p>
</div>

<div id="paris-weather-days" class="weather-grid"></div>

<script>
async function loadParisWeather() {
  const url =
    "https://api.open-meteo.com/v1/forecast?latitude=48.8566&longitude=2.3522&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe%2FParis";

  let data;

  try {
    const res = await fetch(url, { cache: "no-store" });
    data = await res.json();
  } catch (e) {
    const proxy =
      "https://cors-proxy.api.exponential-hub.workers.dev/?" + url;
    const res = await fetch(proxy);
    data = await res.json();
  }

  const container = document.getElementById("paris-weather-days");
  if (!container) return;

  container.innerHTML = "";

  const days = data.daily.time;
  const icons = data.daily.weathercode;
  const tmax = data.daily.temperature_2m_max;
  const tmin = data.daily.temperature_2m_min;

  // ✅ Correct icon path
  const iconURL = code =>
    `https://api.open-meteo.com/v1/weather/icon/${code}.png`;

  days.forEach((day, i) => {
    const pretty = new Date(day).toLocaleDateString("en-US", {
      weekday: "short",
      month: "short",
      day: "numeric"
    });

    const link = `https://weather.com/weather/tenday/l/Paris+France?day=${i}`;

    const div = document.createElement("div");
    div.className = "weather-day";

    div.innerHTML = `
      <a href="${link}" target="_blank" style="text-decoration:none;color:inherit;">
        <img src="${iconURL(icons[i])}" width="42" height="42" />
        <div class="weather-date">${pretty}</div>
        <div class="weather-temp">${Math.round(tmax[i])}° / ${Math.round(tmin[i])}°C</div>
      </a>
    `;

    container.appendChild(div);
  });
}

loadParisWeather();
</script>

  
